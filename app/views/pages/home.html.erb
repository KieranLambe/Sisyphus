<div class="boulder-container-container" data-controller="roll-boulder">
  <div class="boulder-container" data-roll-boulder-target="hill">
    <button class="image-button" data-roll-boulder-target="boulder"><%= image_tag "boulder.png", alt: "boulder" %></button>
  </div>
  <div class="content"></div>
  <div class="diagonal-line"></div>


  <div class="title-card" data-controller="fade-in" data-target="fade-in.firstFadeInElement">
    <%# <h1>Sisyphus</h1> %>
    <h1>The legend of you trying <br> to get stuff done</h1>
  </div>


  <div class="card-list user_tasks" data-controller="fade-in" data-target="fade-in.secondFadeInElement">
    <h3 class="fs-2 fw-bold"> Your tasks for the day </h3>

    <% interests = Interest.includes(tasks: :user_tasks).order(:title) %>
    <% interests.each do |interest| %>
      <% interest_tasks = interest.tasks.select { |task| task.user_tasks.exists?(user_id: current_user ) } %>
      <% next if interest_tasks.empty? %>
      <div class="interest-group">
        <h4><%= interest.title %></h4>
        <% interest_tasks.each do |task| %>
          <% user_task = task.user_tasks.find_by(user_id: current_user.id) %>
          <div class="d-flex flex-column">
            <% if user_task %>
              <%# <% if user_task.complete == false %>
                <div class="task-card">
                  <h4 class="user_task"><%= link_to task.title, user_user_task_path(current_user, user_task), class: "text-decoration-none text-dark" %></h4>
                  <%# <div class="button-container d-flex"> %>
                    <%# <%= link_to "Roll it", toggle_complete_user_task_path(user_task), data: { controller: "complete-button", turbo_method: :patch }, class: 'btn-primary' %>
                    <%# <%= link_to "Remove", user_task_path(user_task), data: { turbo_method: :delete, turbo_confirm: "Are you sure" } %>
                  <%# </div> %>
                  <div class="button-container d-flex" data-controller="complete-button">
                    <%# <%= link_to "Roll it", toggle_complete_user_task_path(user_task), data: { target: "button", action: "click->roll-boulder#rollBoulder", turbo_method: :patch }, class: 'btn-primary' %>
                    <%# <button data-complete-button-target="button" data-action="roll-boulder#rollBoulder complete-button#tick"></button> %>
                      <form class="check_form text-lg inline-block my-3 w-72" data-complete-button-target="form" data-roll-boulder-target="form" action="/users/32/user_tasks/173" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="patch" autocomplete="off"><input type="hidden" name="authenticity_token" value="LqVCiPU44t6okZ1aqU2f-z9RvG6aLWOrzGlGsMui4b5zl-vJGgBnL50J5gnp1SoB-sF--omCmo6ZAOUJY3H01w" autocomplete="off">
                      <input name="user_task[complete]" type="hidden" value="0" autocomplete="off"><input data-user-id="32" data-id="173" data-complete-button-target="button" data-action="roll-boulder#rollBoulder complete-button#tick" class="check_box mr-2 align-middle bg-blue-50 border-yellow-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded checked:bg-green-500" type="checkbox" value="1" checked="checked" name="user_task[complete]" id="user_task_complete">
                      </form>
                    <button data-action="click->roll-boulder#remove">Remove</button>
                    <%# <button class="btn-primary" data-action="click->roll-boulder#nextStage">Roll it!</button> %>
                  </div>
                </div>
              <%# <% else %>
                <%# <h4><%= task.title %>
                <%# <p>This task is complete</p> %>
              <%# <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
